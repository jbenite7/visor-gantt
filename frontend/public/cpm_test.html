<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Test Visual Motor CPM (Avanzado)</title>
    <style>
        body { font-family: "Inter", sans-serif; margin: 0; background: #f8fafc; display: flex; flex-direction: column; height: 100vh; }
        header { background: #fff; padding: 15px 20px; border-bottom: 1px solid #e2e8f0; display: flex; justify-content: space-between; align-items: center; }
        h1 { margin: 0; font-size: 1.2rem; color: #0f172a; }
        .legend { display: flex; gap: 15px; font-size: 0.9rem; }
        .legend span { display: flex; align-items: center; gap: 6px; }
        .dot { width: 10px; height: 10px; border-radius: 50%; }
        
        #workspace { display: flex; flex: 1; overflow: hidden; }
        
        /* TABLE SIDE */
        .table-view { width: 300px; background: #fff; border-right: 1px solid #e2e8f0; display: flex; flex-direction: column; z-index: 2; box-shadow: 2px 0 5px rgba(0,0,0,0.05); }
        .table-header { height: 40px; background: #f1f5f9; border-bottom: 1px solid #e2e8f0; display: flex; align-items: center; padding-left: 10px; font-weight: 600; font-size: 0.85rem; color: #475569; }
        .table-row { height: 40px; border-bottom: 1px solid #f1f5f9; display: flex; align-items: center; padding-left: 15px; font-size: 0.9rem; color: #334155; }
        .table-row:hover { background: #f8fafc; }
        .t-id { width: 30px; color: #94a3b8; font-size: 0.8rem; }
        .t-name { flex: 1; font-weight: 500; }
        .t-date { width: 80px; font-size: 0.75rem; color: #64748b; }

        /* GANTT SIDE */
        .gantt-view { flex: 1; overflow: auto; position: relative; background: #fff; }
        .timeline-header { height: 40px; background: #f8fafc; border-bottom: 1px solid #e2e8f0; position: sticky; top: 0; z-index: 10; }
        .grid-bg { position: absolute; top: 40px; left: 0; bottom: 0; right: 0; background-image: linear-gradient(to right, #f1f5f9 1px, transparent 1px); background-size: 100px 100%; pointer-events: none; }
        
        .task-bar-wrapper { position: absolute; height: 40px; display: flex; align-items: center; pointer-events: none; }
        .task-bar { 
            height: 20px; 
            background: #3b82f6; 
            border-radius: 4px; 
            position: relative; 
            pointer-events: auto; 
            box-shadow: 0 2px 4px rgba(59, 130, 246, 0.3);
            transition: transform 0.2s;
        }
        .task-bar:hover { transform: scaleY(1.1); }
        
        .task-bar.critical { 
            background: #ef4444; 
            box-shadow: 0 2px 4px rgba(239, 68, 68, 0.3);
            background-image: repeating-linear-gradient(45deg, transparent, transparent 5px, rgba(255,255,255,0.2) 5px, rgba(255,255,255,0.2) 10px);
        }

        .milestone {
            width: 16px; height: 16px;
            background: #f59e0b;
            transform: rotate(45deg);
            border: 2px solid #fff;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            margin-left: -8px; /* Center diamond */
        }
        .milestone.critical { background: #dc2626; border-color: #fee2e2; }

        /* ARROWS */
        svg { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; overflow: visible; z-index: 1; }
        path { fill: none; stroke: #cbd5e1; stroke-width: 1.5; stroke-dasharray: 4; }
        path.critical-link { stroke: #ef4444; stroke-width: 2; stroke-dasharray: 0; }
    </style>
</head>
<body>
    <header>
        <h1>ðŸ’Ž Visor CPM EstÃ¡tico</h1>
        <div class="legend">
            <span><div class="dot" style="background:#3b82f6"></div> Tarea Normal</span>
            <span><div class="dot" style="background:#ef4444"></div> Tarea CrÃ­tica</span>
            <span><div class="dot" style="background:#f59e0b"></div> Hito</span>
            <span><div class="dot" style="background:#dc2626; transform:rotate(45deg)"></div> Hito CrÃ­tico</span>
        </div>
    </header>
    <div id="workspace">
        <div class="table-view">
            <div class="table-header">Nombre de Tarea</div><div class='table-row'>
                    <div class='t-id'>1</div>
                    <div class='t-name'>Task A</div>
                    <div class='t-date'>01/06 08:00</div>
                  </div><div class='table-row'>
                    <div class='t-id'>2</div>
                    <div class='t-name'>Task B</div>
                    <div class='t-date'>06/06 00:00</div>
                  </div><div class='table-row'>
                    <div class='t-id'>3</div>
                    <div class='t-name'>Task C</div>
                    <div class='t-date'>10/06 00:00</div>
                  </div><div class='table-row'>
                    <div class='t-id'>4</div>
                    <div class='t-name'>Task D</div>
                    <div class='t-date'>03/06 00:00</div>
                  </div><div class='table-row'>
                    <div class='t-id'>5</div>
                    <div class='t-name'>Milestone End (Critical)</div>
                    <div class='t-date'>12/06 00:00</div>
                  </div><div class='table-row'>
                    <div class='t-id'>6</div>
                    <div class='t-name'>Milestone Internal</div>
                    <div class='t-date'>08/06 00:00</div>
                  </div></div>
        <div class="gantt-view">
            <div class="timeline-header"></div>
            <div class="grid-bg"></div>
            <svg id="arrows-layer"><path d='M 289.47368421053 100 C 289.47368421053 100, 289.47368421053 140, 368.42105263158 140' class='critical-link' vector-effect='non-scaling-stroke' /><path d='M 605.26315789474 140 C 605.26315789474 140, 605.26315789474 180, 684.21052631579 180' class='critical-link' vector-effect='non-scaling-stroke' /><path d='M 289.47368421053 100 C 289.47368421053 100, 289.47368421053 220, 131.57894736842 220' class='' vector-effect='non-scaling-stroke' /><path d='M 368.42105263158 220 C 368.42105263158 220, 368.42105263158 180, 684.21052631579 180' class='' vector-effect='non-scaling-stroke' /><path d='M 763.15789473684 180 C 763.15789473684 180, 763.15789473684 260, 842.10526315789 260' class='critical-link' vector-effect='non-scaling-stroke' /><path d='M 368.42105263158 220 C 368.42105263158 220, 368.42105263158 300, 526.31578947368 300' class='' vector-effect='non-scaling-stroke' /></svg><div class='task-bar-wrapper' style='top: 80px; left: 0%; width: 100%;'>
                    <div class='task-bar critical' style='width: 28.947368421053%;'> 
                            <span style='margin-left: 5px; color: white;'>-480m</span>
                        </div>
                  </div><div class='task-bar-wrapper' style='top: 120px; left: 36.842105263158%; width: 100%;'>
                    <div class='task-bar critical' style='width: 23.684210526316%;'> 
                            <span style='margin-left: 5px; color: white;'>0m</span>
                        </div>
                  </div><div class='task-bar-wrapper' style='top: 160px; left: 68.421052631579%; width: 100%;'>
                    <div class='task-bar critical' style='width: 7.8947368421053%;'> 
                            <span style='margin-left: 5px; color: white;'>0m</span>
                        </div>
                  </div><div class='task-bar-wrapper' style='top: 200px; left: 13.157894736842%; width: 100%;'>
                    <div class='task-bar' style='width: 23.684210526316%;'> 
                            <span style='margin-left: 5px; color: white;'>2880m</span>
                        </div>
                  </div><div class='task-bar-wrapper' style='top: 240px; left: 84.210526315789%; width: 100%;'>
                    <div class='milestone critical'></div>
                  </div><div class='task-bar-wrapper' style='top: 280px; left: 52.631578947368%; width: 100%;'>
                    <div class='milestone'></div>
                  </div></div></div>
    <script>
        const svg = document.querySelector("svg");
        const gantt = document.querySelector(".gantt-view");
        svg.setAttribute("viewBox", "0 0 1000 " + gantt.scrollHeight);
        svg.setAttribute("preserveAspectRatio", "none");
    </script>
</body>
</html>